variables:
  models:
    advanced_model: &advanced_model anthropic/claude-3.7-sonnet
    efficiency_model: &efficiency_model anthropic/claude-3.5-haiku

agents:
  - id: title_generation_worker
    model: *efficiency_model
    tools:
      - tool_forge_event_dispatch
    subscribe:
      - user_task_init
    system_prompt: "{{> title-generator.hbs }}"
    user_prompt: <technical_content>{{event.value}}</technical_content>

  - id: developer
    model: *advanced_model
    tools:
      - tool_forge_fs_read
      - tool_forge_fs_create
      - tool_forge_fs_remove
      - tool_forge_fs_patch
      - tool_forge_process_shell
      - tool_forge_net_fetch
      - tool_forge_fs_search
    subscribe:
      - user_task_init
      - user_task_update
    ephemeral: false
    suggestions: true
    system_prompt: "{{> software-engineer.hbs }}"
    user_prompt: |
      <task>{{event.value}}</task>
      <suggestions>
      {{#each suggestions}}
      <item>{{this}}</item>
      {{/each}}
      </suggestions>

  - id: user_feedback_worker
    model: *efficiency_model
    tools:
      - tool_forge_knowledge_set
    subscribe:
      - tool_forge_process_shell
    system_prompt: "{{> knowledge-storage.hbs }}"
    user_prompt: <shell_command>{{event.value.command}}</shell_command>